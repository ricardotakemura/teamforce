<div class="mainboard" ng-init="$crtl.init()">
	<div id="board">
		<div id="open" class="column">
			<p>
				<label>OPEN</label>
				<button ng-click="showAddTask=true">+</button>
			</p>
			<div ng-repeat="task in tasks | filter:{ status: 'OPEN' }"
				ng-mousemove="$ctrl.move($event)"
				ng-mousedown="$ctrl.drag($event)"
				ng-mouseup="$ctrl.drop($event)" 
				id="task_{{task.id}}"
				class="{{task.status | lowercase}}">
				<card type="task.type" description="task.description"
					worker="task.worker.name" on-set-user="$ctrl.chooseWorker(task.id)"></card>
			</div>
		</div>
		<div id="work" class="column">
			<p>
				<label>WORK</label>
			</p>
			<div ng-repeat="task in tasks | filter:{ status: 'WORK' }"
				ng-mousemove="$ctrl.move($event)"
				ng-mousedown="$ctrl.drag($event)"
				ng-mouseup="$ctrl.drop($event)"
				id="task_{{task.id}}"
				class="{{task.status | lowercase}}">
				<card type="task.type" description="task.description"
					worker="task.worker.name" on-set-user="$ctrl.chooseWorker(task.id)"></card>
			</div>
		</div>
		<div id="code_review" class="column">
			<p>
				<label>CODE REVIEW</label>
			</p>
			<div ng-repeat="task in tasks | filter:{ status: 'CODE_REVIEW' }"
				ng-mousemove="$ctrl.move($event)"
				ng-mousedown="$ctrl.drag($event)"
				ng-mouseup="$ctrl.drop($event)"
				id="task_{{task.id}}"
				class="{{task.status | lowercase}}">
				<card type="task.type" description="task.description"
					worker="task.worker.name" on-set-user="$ctrl.chooseWorker(task.id)"></card>
			</div>
		</div>
		<div id="test" class="column">
			<p>
				<label>TEST</label>
			</p>
			<div ng-repeat="task in tasks | filter:{ status: 'TEST' }" id="task_{{task.id}}"
				ng-mousemove="$ctrl.move($event)"
				ng-mousedown="$ctrl.drag($event)"
				ng-mouseup="$ctrl.drop($event)" 
				id="task_{{task.id}}"
				class="{{task.status | lowercase}}">
				<card type="task.type" description="task.description"
					worker="task.worker.name" on-set-user="$ctrl.chooseWorker(task.id)"></card>
			</div>
		</div>
		<div id="deploy" class="column">
			<p>
				<label>DEPLOY</label>
			</p>
			<div ng-repeat="task in tasks | filter:{ status: 'DEPLOY' }"
				ng-mousemove="$ctrl.move($event)"
				ng-mousedown="$ctrl.drag($event)"
				ng-mouseup="$ctrl.drop($event)" 
				id="task_{{task.id}}"
				class="{{task.status | lowercase}}">
				<card type="task.type" description="task.description"
					worker="task.worker.name" on-set-user="$ctrl.chooseWorker(task.id)"></card>
			</div>
		</div>
		<div id="close" class="column">
			<p>
				<label>CLOSE</label>
			</p>
			<div ng-repeat="task in tasks | filter:{ status: 'CLOSE' }"
				ng-mousemove="$ctrl.move($event)"
				ng-mousedown="$ctrl.drag($event)"
				ng-mouseup="$ctrl.drop($event)"
				id="task_{{task.id}}"
				class="{{task.status | lowercase}}">
				<card type="task.type" description="task.description"
					worker="task.worker.name" on-set-user="$ctrl.chooseWorker(task.id)"></card>
			</div>
		</div>
	</div>
	<div id="add_task" class="box" ng-hide="!showAddTask">
		<p class="title">
			<label>New force</label>
			<button ng-click="showAddTask=false">X</button>
		</p>
		<form name="taskForm" ng-submit="$ctrl.addTask()">
			<p>
				<label for="typeInput">Type: </label> <select ng-model="$ctrl.type"
					id="typeInput">
					<option selected value="BUG">BUG</option>
					<option value="ANALYSIS">ANALYSIS</option>
					<option value="FEATURE">FEATURE</option>
				</select>
			</p>
			<p>
				<label for="descriptionInput">Description: </label>
				<textarea cols="30" rows="5" ng-model="$ctrl.description"
					id="descriptionInput">></textarea>
			</p>
			<button type="submit">Do or do not</button>
		</form>
	</div>
	<div id="task_user" class="box" ng-hide="!showTaskUser">
		<p class="title">
			<label>Choose the jedi</label>
			<button ng-click="showTaskUser=false">X</button>
		</p>
		<form name="taskUserForm" ng-submit="$ctrl.saveWorkerInTask()">
			<p>
				<label for="userInput">User: </label> <select
					ng-model="$ctrl.workerId" id="userInput">
					<option ng-repeat="worker in workers" ng-value="worker.id">{{worker.name}}</option>
				</select>
			</p>
			<button type="submit">Join</button>
		</form>
	</div>
</div>
